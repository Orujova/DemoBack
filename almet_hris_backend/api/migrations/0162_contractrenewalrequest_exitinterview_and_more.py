# Generated by Django 5.2.1 on 2026-01-13 12:35

import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('api', '0161_remove_assessmentperiod_status'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ContractRenewalRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('current_contract_end_date', models.DateField(help_text='Current contract end date')),
                ('current_contract_type', models.CharField(help_text='Current contract type', max_length=20)),
                ('notification_sent_at', models.DateTimeField(blank=True, help_text='When notification was sent to manager', null=True)),
                ('manager_decision', models.CharField(blank=True, choices=[('RENEW', 'Renew Contract'), ('NOT_RENEW', 'Do Not Renew')], help_text="Manager's renewal decision", max_length=10)),
                ('manager_decided_at', models.DateTimeField(blank=True, null=True)),
                ('new_contract_type', models.CharField(blank=True, choices=[('PERMANENT', 'Permanent'), ('3_MONTHS', '3 Months'), ('6_MONTHS', '6 Months'), ('1_YEAR', '1 Year'), ('2_YEARS', '2 Years')], help_text='New contract type if renewing', max_length=20)),
                ('new_contract_duration_months', models.IntegerField(blank=True, help_text='Duration in months for fixed-term contracts', null=True)),
                ('salary_change', models.BooleanField(default=False, help_text='Is there a salary change?')),
                ('new_salary', models.DecimalField(blank=True, decimal_places=2, help_text='New salary amount', max_digits=10, null=True)),
                ('position_change', models.BooleanField(default=False, help_text='Is there a position change?')),
                ('new_position', models.CharField(blank=True, help_text='New position title', max_length=200)),
                ('manager_comments', models.TextField(blank=True, help_text="Manager's comments on decision")),
                ('hr_processed_at', models.DateTimeField(blank=True, null=True)),
                ('hr_comments', models.TextField(blank=True, help_text="HR's notes on processing")),
                ('status', models.CharField(choices=[('PENDING_MANAGER', 'Pending Manager Decision'), ('MANAGER_DECIDED', 'Manager Decision Made'), ('PENDING_HR', 'Pending HR Processing'), ('HR_PROCESSED', 'HR Processed'), ('COMPLETED', 'Completed'), ('EXPIRED', 'Contract Expired')], default='PENDING_MANAGER', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deleted_%(class)ss', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contract_renewal_requests', to='api.employee')),
                ('hr_processed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contract_processed_as_hr', to=settings.AUTH_USER_MODEL)),
                ('manager_decided_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contract_decisions_as_manager', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Contract Renewal Request',
                'verbose_name_plural': 'Contract Renewal Requests',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ExitInterview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('last_working_day', models.DateField(help_text="Employee's last working day")),
                ('status', models.CharField(choices=[('PENDING', 'Pending Employee Response'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], default='PENDING', max_length=15)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_exit_interviews', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deleted_%(class)ss', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='exit_interviews', to='api.employee')),
            ],
            options={
                'verbose_name': 'Exit Interview',
                'verbose_name_plural': 'Exit Interviews',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ExitInterviewQuestion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('section', models.CharField(choices=[('ROLE', 'Role & Responsibilities'), ('MANAGEMENT', 'Work Environment & Management'), ('COMPENSATION', 'Compensation & Career Development'), ('CONDITIONS', 'Work Conditions'), ('CULTURE', 'Company Culture & Values'), ('FINAL', 'Final Comments')], help_text='Question section/category', max_length=20)),
                ('question_text_en', models.TextField(help_text='Question text in English')),
                ('question_text_az', models.TextField(blank=True, help_text='Question text in Azerbaijani')),
                ('question_type', models.CharField(choices=[('RATING', 'Rating (1-5)'), ('TEXT', 'Text Response'), ('TEXTAREA', 'Long Text Response'), ('CHOICE', 'Multiple Choice')], default='RATING', max_length=10)),
                ('order', models.IntegerField(default=0, help_text='Display order within section')),
                ('is_required', models.BooleanField(default=False, help_text='Is this question mandatory?')),
                ('is_active', models.BooleanField(default=True, help_text='Is this question active?')),
                ('choices', models.JSONField(blank=True, default=list, help_text='Choices for multiple choice questions')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_exit_questions', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deleted_%(class)ss', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Exit Interview Question',
                'verbose_name_plural': 'Exit Interview Questions',
                'ordering': ['section', 'order'],
            },
        ),
        migrations.CreateModel(
            name='ExitInterviewSummary',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('role_avg_rating', models.FloatField(default=0)),
                ('management_avg_rating', models.FloatField(default=0)),
                ('compensation_avg_rating', models.FloatField(default=0)),
                ('conditions_avg_rating', models.FloatField(default=0)),
                ('culture_avg_rating', models.FloatField(default=0)),
                ('overall_avg_rating', models.FloatField(default=0)),
                ('main_reason_for_leaving', models.CharField(blank=True, max_length=255)),
                ('would_recommend_company', models.BooleanField(default=True)),
                ('retention_suggestions', models.TextField(blank=True)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('exit_interview', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='summary', to='api.exitinterview')),
            ],
            options={
                'verbose_name': 'Exit Interview Summary',
                'verbose_name_plural': 'Exit Interview Summaries',
            },
        ),
        migrations.CreateModel(
            name='ProbationReview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('review_period', models.CharField(choices=[('30_DAY', '30-Day Review'), ('60_DAY', '60-Day Review'), ('90_DAY', '90-Day Review')], help_text='Which review period (30/60/90 days)', max_length=10)),
                ('due_date', models.DateField(help_text='Review due date')),
                ('notification_sent_at', models.DateTimeField(blank=True, help_text='When notification was sent', null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending Response'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed')], default='PENDING', max_length=15)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deleted_%(class)ss', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='probation_reviews', to='api.employee')),
            ],
            options={
                'verbose_name': 'Probation Review',
                'verbose_name_plural': 'Probation Reviews',
                'ordering': ['-due_date'],
                'unique_together': {('employee', 'review_period')},
            },
        ),
        migrations.CreateModel(
            name='ProbationReviewQuestion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('review_type', models.CharField(choices=[('EMPLOYEE_30', 'Employee 30-Day'), ('MANAGER_30', 'Manager 30-Day'), ('EMPLOYEE_60', 'Employee 60-Day'), ('MANAGER_60', 'Manager 60-Day'), ('EMPLOYEE_90', 'Employee 90-Day'), ('MANAGER_90', 'Manager 90-Day')], help_text='Which review this question belongs to', max_length=15)),
                ('question_text_en', models.TextField(help_text='Question text in English')),
                ('question_text_az', models.TextField(blank=True, help_text='Question text in Azerbaijani')),
                ('question_type', models.CharField(choices=[('RATING', 'Rating (1-5)'), ('YES_NO', 'Yes/No'), ('TEXT', 'Text Response'), ('TEXTAREA', 'Long Text Response')], default='YES_NO', max_length=10)),
                ('order', models.IntegerField(default=0, help_text='Display order')),
                ('is_required', models.BooleanField(default=False, help_text='Is this question mandatory?')),
                ('is_active', models.BooleanField(default=True, help_text='Is this question active?')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_probation_questions', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deleted_%(class)ss', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Probation Review Question',
                'verbose_name_plural': 'Probation Review Questions',
                'ordering': ['review_type', 'order'],
            },
        ),
        migrations.CreateModel(
            name='ResignationRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('submission_date', models.DateField(default=django.utils.timezone.now, help_text='Date when resignation was submitted')),
                ('last_working_day', models.DateField(help_text="Employee's last working day")),
                ('resignation_letter', models.FileField(blank=True, help_text='Uploaded resignation letter/document', null=True, upload_to='resignations/%Y/%m/')),
                ('employee_comments', models.TextField(blank=True, help_text="Employee's additional comments")),
                ('status', models.CharField(choices=[('PENDING_MANAGER', 'Pending Manager Approval'), ('MANAGER_APPROVED', 'Manager Approved'), ('MANAGER_REJECTED', 'Manager Rejected'), ('PENDING_HR', 'Pending HR Approval'), ('HR_APPROVED', 'HR Approved'), ('HR_REJECTED', 'HR Rejected'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], default='PENDING_MANAGER', max_length=20)),
                ('manager_approved_at', models.DateTimeField(blank=True, null=True)),
                ('manager_comments', models.TextField(blank=True, help_text="Manager's comments on resignation")),
                ('hr_approved_at', models.DateTimeField(blank=True, null=True)),
                ('hr_comments', models.TextField(blank=True, help_text="HR's comments on resignation")),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deleted_%(class)ss', to=settings.AUTH_USER_MODEL)),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='resignation_requests', to='api.employee')),
                ('hr_approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_resignations_as_hr', to=settings.AUTH_USER_MODEL)),
                ('manager_approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_resignations_as_manager', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Resignation Request',
                'verbose_name_plural': 'Resignation Requests',
                'ordering': ['-submission_date'],
            },
        ),
        migrations.CreateModel(
            name='ResignationActivity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('activity_type', models.CharField(choices=[('CREATED', 'Resignation Submitted'), ('MANAGER_APPROVED', 'Manager Approved'), ('MANAGER_REJECTED', 'Manager Rejected'), ('HR_APPROVED', 'HR Approved'), ('HR_REJECTED', 'HR Rejected'), ('COMPLETED', 'Process Completed'), ('CANCELLED', 'Cancelled'), ('COMMENT_ADDED', 'Comment Added')], max_length=20)),
                ('description', models.TextField()),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('performed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('resignation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activities', to='api.resignationrequest')),
            ],
            options={
                'verbose_name': 'Resignation Activity',
                'verbose_name_plural': 'Resignation Activities',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='exitinterview',
            name='resignation_request',
            field=models.OneToOneField(blank=True, help_text='Linked resignation request', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='exit_interview', to='api.resignationrequest'),
        ),
        migrations.CreateModel(
            name='ExitInterviewResponse',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rating_value', models.IntegerField(blank=True, help_text='Rating value for rating questions (1-5)', null=True)),
                ('text_value', models.TextField(blank=True, help_text='Text response for text/textarea questions')),
                ('choice_value', models.CharField(blank=True, help_text='Selected choice for multiple choice questions', max_length=255)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('exit_interview', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='responses', to='api.exitinterview')),
                ('question', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='responses', to='api.exitinterviewquestion')),
            ],
            options={
                'verbose_name': 'Exit Interview Response',
                'verbose_name_plural': 'Exit Interview Responses',
                'ordering': ['question__section', 'question__order'],
                'unique_together': {('exit_interview', 'question')},
            },
        ),
        migrations.CreateModel(
            name='ProbationReviewResponse',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('respondent_type', models.CharField(choices=[('EMPLOYEE', 'Employee'), ('MANAGER', 'Manager')], help_text='Who is responding (employee or manager)', max_length=10)),
                ('rating_value', models.IntegerField(blank=True, null=True)),
                ('yes_no_value', models.BooleanField(blank=True, null=True)),
                ('text_value', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('question', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='responses', to='api.probationreviewquestion')),
                ('review', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='responses', to='api.probationreview')),
            ],
            options={
                'verbose_name': 'Probation Review Response',
                'verbose_name_plural': 'Probation Review Responses',
                'ordering': ['question__order'],
                'unique_together': {('review', 'question', 'respondent_type')},
            },
        ),
    ]
